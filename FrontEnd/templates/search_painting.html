{% extends 'About.html' %}
{% load static %}
{% block content %}
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

	<!-- title -->
	<title>Single Product</title>

	<!-- favicon -->
	<link rel="shortcut icon" type="image/png" href="{% static 'Web/assets/img/favicon.png' %}">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<!-- fontawesome -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/all.min.css' %}">
	<!-- bootstrap -->
	<link rel="stylesheet" href="{% static 'Web/assets/bootstrap/css/bootstrap.min.css' %}">
	<!-- owl carousel -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/owl.carousel.css' %}">
	<!-- magnific popup -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/magnific-popup.css' %}">
	<!-- animate css -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/animate.css' %}">
	<!-- mean menu css -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/meanmenu.min.css' %}">
	<!-- main style -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/main.css' %}">
	<!-- responsive -->
	<link rel="stylesheet" href="{% static 'Web/assets/css/responsive.css' %}">
<style>



 .userspan{
	 color: #fff;
	font-weight: 700;
	padding: 15px;
	}

		.userspan:hover{
	color:#F28123;
	}
</style>

</head>
<body>

	<div id="overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 9999;">
		<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: rgb(132, 3, 201);">
			<div class="spinner-border text-purple" role="status">
				<span class="visually-hidden">Loading...</span>
			</div>
		</div>
	</div>

	<div class="container-xxl bg-white p-0">
		<!-- Your existing content here -->
	</div>

	<script>
		// Function to show the loader
		function showLoader() {
			document.getElementById("overlay").style.display = "block";
		}

		// Function to hide the loader
		function hideLoader() {
			document.getElementById("overlay").style.display = "none";
		}

		// Function to handle form submission and display loader
		function handleFormSubmission() {
			showLoader(); // Show the loader when the form is submitted
			// Other form submission logic goes here
		}
	</script>


<!-- Your existing navigation bar code -->
<nav class="main-menu">
  <ul>
    <li><a href="{% url 'Home_page' %}">Home</a></li>
    <li><a href="{% url 'About_page' %}">About</a></li>
    <li  class="current-list-item"><a href="#">Pages</a>
      <ul class="sub-menu">
        <li><a href="{% url 'user_painting' %}">Upload paintings</a></li>
        <li><a href="{% url 'search_painting' %}">Search a painting</a></li>
      </ul>
    </li>
    <li><a href="{% url 'Contact_page' %}">Contact</a></li>
    <li><a href="{% url 'Shop' %}">Shop</a></li>
      <li>
									{% for i in user_profile %}
										<img src="{{ i.profile_image.url }}" style="margin-left:100px;border:2px solid #F28123;object-fit:cover;"
											 alt="" name="image" class="rounded-circle" height="35px" width="35px">
									{% empty %}
										{% if request.session.Username %}
											<!-- Show default image if user_profile is empty -->
											<img src="{% static 'Web/assets/img/usericon11.png' %}" style="margin-left:100px;border:2px solid #F28123;display:cover;"
												 alt="Default Image" name="image" class="rounded-circle" height="35px" width="35px">
										{% endif %}
									{% endfor %}
									{% if request.session.Username %}
										<span class="userspan">{{request.session.Username}}</span>
										<i class="bi bi-chevron-down " style="color:#fff;font-weight:bold;margin-left:-10px;"></i>
										<ul class="sub-menu"  style="margin-left:100px;">
											<li><a href="{% url 'profile_page' %}">My account</a></li>
        <li><a href="#" data-toggle="modal" data-target="#logoutModal">Logout</a></li>
										</ul>
									{% else %}

								<li>
											<a href="{% url 'Login_page'%}" class="nav-link">
												<i class="bi bi-person-plus" style="font-size: 20px;margin-left:30px;"></i>
											</a>
										</li>
									{% endif %}
								</li>
    <li>
      <div class="header-icons">
        <a class="wishlist-icon" href="{% url 'wishlist' %}"><i class="far fa-heart"></i></a>
        <a class="shopping-cart" href="{% url 'Cart_page' %}"><i class="fas fa-shopping-cart"></i></a>
        <a class="mobile-hide search-bar-icon" href="#"><i class="fas fa-search"></i></a>
      </div>
    </li>
  </ul>
</nav>
						<a class="mobile-show search-bar-icon" href="#"><i class="fas fa-search"></i></a>
												<div class="mobile-menu"></div>

						<!-- menu end -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->


<!-- search area -->
	<div class="search-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<span class="close-btn"><i class="fas fa-window-close"></i></span>
					<div class="search-bar">
						<div class="search-bar-tablecell">
							<form action="{% url 'search' %}" method="get">
							<h3>Search For:</h3>
							<input id="query" name="query" type="text" placeholder="Keywords">
							<button type="submit">Search <i class="fas fa-search"></i></button>
								</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end search area -->


<!-- Logout Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                  <h5 class="modal-title" id="logoutModalLabel">
                    <div style="display: flex; align-items: center;">
					<i class="fas fa-exclamation-circle" style="margin-right: 6px;margin-top:-2px;"></i>
                        <div>Are you sure you want to logout ?</div>
                    </div>
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

           <div class="modal-footer">
                <button type="button" class="btn btn-secondary" style="margin-top:40px !important;" data-dismiss="modal">Cancel</button>
				&nbsp;
                <a href="{% url 'user_logout' %}" class="btn btn-primary" style="margin-top:40px !important;">Logout</a>
            </div>
        </div>
    </div>
</div>
	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						<p>See more Details</p>
						<h1>Search Painting</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

    <div class="contact-from-section mt-150 mb-150">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 mb-5 mb-lg-0">
                    <div class="form-title text-center">
                        <h2>Upload and Identify Paintings</h2>
                        <p>Welcome to our painting identification service! Have a painting you're curious about? Upload an image below, and we'll help you identify it. Whether it's a masterpiece you found at a flea market or an artwork passed down through generations, we're here to assist you in uncovering its history and significance. Simply select the image file from your device and let our experts do the rest. We look forward to assisting you!</p>
                    </div>
                    <div class="contact-form">
						<form action="{% url 'search_painting' %}" method="post" enctype="multipart/form-data">
							{% csrf_token %}
							<div class="mb-4 d-flex justify-content-center">
								<!-- Display uploaded image if available -->
								{% if uploaded_image_url %}
								<img id="selectedImage" src="{{ uploaded_image_url }}" alt="Uploaded Image" style="width: 500px;">
								{% else %}
								<img id="selectedImage" src="https://mdbootstrap.com/img/Photos/Others/placeholder.jpg" alt="example placeholder" style="width: 500px;">
								{% endif %}
							</div>
							<div class="d-flex justify-content-center">
								<div class="btn btn-primary btn-rounded" id="upload-box">
									<label class="form-label text-white m-1" for="customFile1">Choose file</label>
									<input type="file" class="form-control d-none" name="painting_picture" id="customFile1" onchange="displaySelectedImage(event, 'selectedImage')" required>
								</div>
							</div>
							<div class="text-center">
								<input type="submit" class="cart-btn px-5 m-5" style="text-transform:none; font-weight:normal; width:300px;color:white; margin-left:20px; padding:9px; font-size:14px; border-radius:10px !important;" value="Search Artist">
							</div>
						</form>


						<!-- Display predicted artist and confidence score if available -->
						{% if predicted_artist %}
						<div class="text-center">
							<p style="font-size: 30px; margin-top:100px;">Predicted Artist: <span style="font-weight: bold;">{{ predicted_artist }}</span></p>
							<p  style="font-size: 30px;">Confidence Score: <span style="font-weight: bold;">{{ confidence_score }}</span></p>
						</div>
						{% endif %}


                    </div>
                </div>
            </div>
        </div>
    </div>


<script>
	function displaySelectedImage(event, elementId) {
    const selectedImage = document.getElementById(elementId);
    const fileInput = event.target;

    if (fileInput.files && fileInput.files[0]) {
        const reader = new FileReader();

        reader.onload = function(e) {
            selectedImage.src = e.target.result;
        };

        reader.readAsDataURL(fileInput.files[0]);
    }
}
</script>
</body>
</html>
{%endblock%}
